"use strict";angular.module("webApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","firebase","firebase.ref","angular-toArrayFilter"]),angular.module("webApp").controller("HeaderCtrl",["$scope","$location",function(a,b){a.isActive=function(a){return a===b.path()}}]),angular.module("webApp").controller("MachinesCtrl",["$scope","$window","Ref","$firebaseArray",function(a,b,c,d){function e(b){a.err=b,$timeout(function(){a.err=null},5e3)}a.machines=d(c.child("machines")),a.machines.$loaded()["catch"](e),a.locations=d(c.child("locations")),a.locations.$loaded()["catch"](e),c.child("machines").on("child_changed",function(b){var c=b.val();a.last_change=c}),a.locationNumRuns=function(b){return _.chain(a.machines).filter(function(a){return a.location_name==b.name}).map(function(a){return a.num_runs}).reduce(function(a,b){return a+b},0)},a.averageMachineTime=function(b){var c=_.chain(a.machines).filter(function(a){return a.type==b}).map(function(a){return _.values(a.runs)}).flatten(!0).map(function(a){return a?(a[1]-a[0])/1e3/60:void 0}).compact().value();return _.reduce(c,function(a,b){return a+b},0)/c.length},a.averageLocationTime=function(b,c){var d=_.chain(a.machines).filter(function(a){return a.location_name==b}).filter(function(a){return a.type==c}).map(function(a){return _.values(a.runs)}).flatten(!0).map(function(a){return a?(a[1]-a[0])/1e3/60:void 0}).compact().value();return _.reduce(d,function(a,b){return a+b},0)/d.length},a._=_}]),angular.module("firebase.config",[]).constant("FBURL","https://aljohri-nulaundry.firebaseio.com"),angular.module("firebase.ref",["firebase","firebase.config"]).factory("Ref",["$window","FBURL",function(a,b){return new a.Firebase(b)}]),angular.module("webApp").filter("reverse",function(){return function(a){return angular.isArray(a)?a.slice().reverse():[]}}),angular.module("webApp").filter("total",["$parse",function(a){return function(b,c){var d=b instanceof Array?b.length:0,e=a(c);if("undefined"==typeof c||0===d)return d;if(isNaN(e(b[0])))throw"filter total can count only numeric values";for(var f=0;d--;)f+=e(b[d]);return f}}]),angular.module("webApp").config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/machines.html",controller:"MachinesCtrl"}).otherwise({redirectTo:"/"})}]);